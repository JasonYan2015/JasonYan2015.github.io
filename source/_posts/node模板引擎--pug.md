---

title: node模板引擎——pug(jade)
tags: ['node', 'html', 'pug' , '模板引擎']

---

> 最近发掘了一个个人项目，初上手Node构建web应用。之前大概学了学好久了也都忘了，这次趁着这个项目好好熟悉熟悉，练练手。首先从模板引擎开始吧。

<!-- more -->

## 前言

`jade`和`pug`是一个东西，以前叫`jade`后来因为商标问题改名`pug`。

## 和ejs比较

网上有流传过一个万行测试(当时还叫Jade)，让两者和另一个模板引擎，`Handlebars`解释万行html代码，最后的效率（花费时间）是

Jade 287ms > ejs 43ms > Handlebars 28ms

> Jade 因为采用了类似 zen coding 的语法，比较新奇，但效率极其低下。

但是，`pug`就其强制缩进而优雅简洁。`ejs`更传统，于是在大量数据代码结构下页面的结构容易显得混乱。

另外看了知乎贺老的回答，发觉`pug`一个超棒的点

> 换行处理，避免产生额外的空白节点

不知道大家怎么想，反正我老是因为莫名其妙的空白节点困扰，尤其是css样式的时候，其实也知道怎么解决，比如根节点`font-size: 0`之类的，但是主要是容易和其他样式造成的莫名空隙搞混，不知道到底是哪个原因，就会多一步确认和调试步骤

贺老还讲了很多，具体看文末的参考链接。

但是我觉得吧，因为`pug`的简洁语法，导致会有点上手难度，不像ejs，简直就是个`jsp`，一眼就看懂了，但是`pug`要是没专门学习过还真看不太懂，更别说自己写了。

## jade语法

**缩进**，**缩进**，**再缩进**

> 就笼统地总结一下吧,详细可以看一下参考链接。

1. 不用尖括号，使用 **缩进**
2. 每个换行的第一个单词会被解释为一个标签(无论HTML有没有这个标签)
3. 标签的属性名使用括号包起来，并且属性之间用逗号间隔`(ATTRNAME1=ATTRVALUE1, ATTRNAME2=ATTRVALUE2)`。特别的，`id`和`class`可以用像`emmet`的语法: `TAGNAME#IDNAME.CLASSNAME`，然后再跟括号包裹其他属性
4. 使用`!{}` `#{}` `= ` `!= `来渲染后台数据，其中，用`!`的这一系列可以解释后天数据中的尖括号标签，而其他会把尖括号当成字符串渲染，感觉也是安全考虑
5. 服务端代码用`- `开头，比如`if`判断和`for`循环等
6. 可以重用`jade`块(`Mixin`声明一个块，然后用`+BLOCKNAME()`调用)
7. 模板继承，`extends DIRNAME`

****
参考链接
* [Web 模板 Jade、EJS、Handlebars 万行代码解释效率比较，Jade 完败](http://cnodejs.org/topic/50e70edfa7e6c6171a1d70fa)
* [【知乎】关于nodejs的模板引擎，如何选择 EJS 和 Jade?](https://www.zhihu.com/question/20355486?sort=created)
* [ Jade 模板引擎使用](http://cnodejs.org/topic/5368adc5cf738dd6090060f2)